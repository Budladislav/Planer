# Инструкция по тестированию PWA

## 1. Проверка Manifest в DevTools

### Как проверить:
1. Откройте DevTools (F12)
2. Перейдите в **Application** → **Manifest**
3. Проверьте:
   - ✅ **Identity**: Name, Short name, Description должны отображаться
   - ✅ **Presentation**: Start URL, Theme color, Background color, Display (standalone)
   - ✅ **Icons**: Должны отображаться иконки 192x192 и 512x512

### Если видите ошибку "Syntax error":
- Проверьте, что `manifest.json` доступен по пути `/manifest.json` (dev) или `/Planer/manifest.json` (production)
- Откройте `manifest.json` напрямую в браузере: `http://localhost:3000/manifest.json`
- Проверьте JSON на валидность (нет ли лишних запятых, кавычек)

## 2. Проверка иконок и цветов

### Иконки:
1. **Application** → **Manifest** → секция **Icons**
2. Должны быть видны две иконки: 192x192 и 512x512
3. Кликните на иконку — она должна открыться в новой вкладке
4. Если иконки не отображаются:
   - Проверьте пути: `/icon-192.svg` и `/icon-512.svg` (dev) или `/Planer/icon-192.svg` (production)
   - Откройте иконки напрямую в браузере

### Цвета:
1. **Application** → **Manifest** → секция **Presentation**
2. **Theme color**: `#4f46e5` (indigo-600)
3. **Background color**: `#f9fafb` (slate-50)
4. Эти цвета должны совпадать с цветами в приложении

### Визуальная проверка:
- Откройте приложение на мобильном
- При установке PWA цвет адресной строки должен быть indigo (#4f46e5)
- Иконка на главном экране должна отображаться

## 3. Тестирование на телефоне

### Вариант 1: Пуш на сервер (рекомендуется)
```bash
git add .
git commit -m "v1.7: PWA implementation"
git push
```
После пуша:
1. Откройте приложение на телефоне по вашему домену
2. В Chrome должно появиться предложение "Добавить на главный экран"
3. Или через меню: **⋮** → **Добавить на главный экран**

### Вариант 2: Эмулятор Android на компьютере

#### Android Studio Emulator:
1. Установите [Android Studio](https://developer.android.com/studio)
2. Создайте виртуальное устройство (AVD)
3. Запустите эмулятор
4. Откройте Chrome в эмуляторе
5. Перейдите на `http://10.0.2.2:3000` (localhost эмулятора)

#### Chrome DevTools Device Emulation:
1. Откройте DevTools (F12)
2. Нажмите **Toggle device toolbar** (Ctrl+Shift+M)
3. Выберите устройство (например, "Pixel 5")
4. **⚠️ Ограничение**: Эмуляция не полностью имитирует реальное устройство
5. Для полного тестирования PWA лучше использовать реальный телефон

### Вариант 3: Локальная сеть (если телефон и компьютер в одной сети)
1. Узнайте IP адрес компьютера:
   - Windows: `ipconfig` → IPv4 Address
   - Mac/Linux: `ifconfig` или `ip addr`
2. Запустите dev сервер: `npm run dev` (уже настроен на `host: '0.0.0.0'`)
3. На телефоне откройте: `http://ВАШ_IP:3000`
4. **⚠️ Важно**: Для PWA нужен HTTPS (или localhost). HTTP может не работать для установки.

## 4. Проверка Service Worker

### В DevTools:
1. **Application** → **Service Workers**
2. Должен быть зарегистрирован SW со статусом "activated and is running"
3. Проверьте **Cache Storage** → должен быть кэш `monofocus-static-v1.6`

### Тест офлайн:
1. Установите PWA на телефон
2. Включите режим "В самолёте"
3. Откройте приложение — должно работать (данные в localStorage)

## 5. Чеклист перед пушем

- [ ] Manifest.json валидный (нет синтаксических ошибок)
- [ ] Иконки доступны по правильным путям
- [ ] Service Worker регистрируется без ошибок
- [ ] В DevTools → Application → Manifest нет ошибок
- [ ] Theme color и Background color указаны правильно
- [ ] Display mode: "standalone"

## 6. Известные проблемы и решения

### Проблема: Manifest показывает "Syntax error"
**Решение**: 
- Проверьте путь к manifest (должен быть `/manifest.json` в dev)
- Убедитесь, что JSON валидный
- Проверьте консоль браузера на ошибки загрузки

### Проблема: Иконки не отображаются
**Решение**:
- SVG иконки могут не поддерживаться на всех устройствах
- Рекомендуется конвертировать в PNG (192x192 и 512x512)
- Используйте онлайн-конвертер или ImageMagick

### Проблема: PWA не устанавливается на телефоне
**Решение**:
- Убедитесь, что используете HTTPS (или localhost)
- Проверьте, что manifest.json доступен
- Проверьте, что Service Worker зарегистрирован
- В Chrome: **⋮** → **Добавить на главный экран** (может не показываться автоматически)

