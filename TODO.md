## План развития MonoFocus Planner

### 1. PWA (Progressive Web App)

- **Цель**: получить ощущение нативного приложения без адресной строки и UI браузера, удобный запуск с главного экрана телефона.
- **Основные шаги**:
  - Добавить `manifest.json` с иконками, названием, цветами темы (Android Chrome).
  - Настроить `vite` / сборку на генерацию и подключение manifest.
  - Добавить service worker для кэширования статики (минимальный офлайн: приложение открывается даже без сети, данные всё так же в `localStorage`).
  - Настроить корректный `display: standalone`, чтобы приложение открывалось без адресной строки.
  - Протестировать установку на Android Chrome и поведение при обновлениях версии (обновление SW, кэша).

### 2. Сортировка в бакете и днях недели (Week View)

- **Текущее состояние**:
  - В `Today` есть dnd‑сортировка, порядок хранится в `taskOrderByDay[today]` и синхронизируется с соответствующим днём во `Week`.
  - В `Week` реализован перенос задач между бакетом и днями (drag&drop + Move‑модал), но **нет сортировки** внутри:
    - бакета недели (задачи без `plan.day`),
    - будущих дней недели.
- **Желаемое поведение**:
  - Возможность менять порядок задач **в бакете недели** dnd‑перетаскиванием.
  - Возможность менять порядок задач **в каждом дне недели** (включая будущие дни), dnd‑перетаскиванием прямо во `Week`.
  - Порядок в `Week` для конкретного дня должен быть единым с `Today` для этого дня (если день наступил, Today — источник правды / или аккуратная синхронизация).
- **Реализация** (ориентировочно):
  - Расширить использование `taskOrderByDay`:
    - хранить порядок и для будущих дней, если задачи вручную отсортированы в `Week`.
    - при dnd внутри дня в `Week` обновлять `taskOrderByDay[day]` точно так же, как это делается в `Today`.
  - Для бакета недели:
    - ввести отдельное хранилище порядка (например, `taskOrderByWeek[weekStr]`), либо сохранить естественный порядок массива, но с dnd‑переписыванием.
    - реализовать `SortableContext` для списка `weekTasks` и при dnd обновлять порядок в сторе.
  - Продумать, кто «главный» при конфликте порядка: Today vs Week (для одного и того же дня).

### 3. Inbox — унификация и улучшения

- **Визуальное поведение**:
  - Привести карточки Inbox к тому же стилю, что в Today/Week/Done/Events:
    - единый размер шрифтов (`text-sm` для основного текста, `text-xs` для мета),
    - единые паддинги и бордеры (`p-3`, `border`, `rounded-lg`, `shadow-sm`),
    - правильный перенос длинного текста (включая строки без пробелов) без ломания кнопок.

- **Поведение захвата → задача**:
  - Уже есть выбор: в Today или в определённую неделю (через селектор недели).
  - Оставить эту механику, но:
    - аккуратно проверить, что выбранная неделя и день корректно синхронизируются с Week View (особенно для будущих недель).
- **Идеи на будущее (пока не реализовывать)**:
  - Пресеты типов задач (личное/работа/идея и т.д.).
  - Более «умный» выбор времени/недели (выходные, через 2 недели и т.п.).
  - Свайпы на мобильном:
    - свайп влево: отправить в week‑bucket текущей недели,
    - свайп вправо: отправить в Today.
  - Эти идеи зафиксировать, но реализовывать после базовой унификации UI и сортировки.

### 4. Статистика и дашборд

- **Имеющиеся данные**:
  - Даты планирования и выполнения (`plan.day`, `plan.week`, `updatedAt`),
  - статус задач (`todo`/`done`),
  - флаг `frog`,
  - `timeSpent` для завершённых задач,
  - история за все дни/недели/месяцы.
- **Цели статистики**:
  - Показать динамику продуктивности:
    - количество выполненных задач по дням/неделям/месяцам/годам,
    - суммарное время по периодам,
    - отдельная статистика по «лягушкам»,
    - streak’и (серии дней/недель с выполненными задачами) — опционально.
- **Форма представления**:
  - Отдельная вкладка **Statistics** или скрытый раздел, доступный из `Settings` (например, кнопка «Open dashboard»).
  - Дашборд с несколькими блоками:
    - «Сегодня / Эта неделя / Этот месяц / Этот год» — короткие цифры и суммарное время.
    - Графики по времени/количеству задач (линейные/столбчатые).
    - Блок по лягушкам: сколько «лягушек» запланировано/сделано за период.
  - Фильтры вида: **Неделя / Месяц / Год / Всё время**.
- **Реализация (в общих чертах)**:
  - Завести слой вычислений статистики (чистые функции, которые на вход получают массив задач и возвращают агрегаты).
  - Использовать эти агрегаты во вьюхе Statistics, не перегружая `Done` и другие основные вкладки.
  - Для графиков выбрать лёгкую библиотеку или сделать простой SVG/Canvas‑рендер, чтобы не тянуть тяжёлые зависимости.

### 5. Синхронизация между устройствами (отложено)

- **Статус**: отложено на будущее после стабилизации функционала и UI.
- **Условия для старта работ**:
  - Приложение «устаканилось»: PWA, сортировки, Inbox, статистика протестированы и удобны.
  - Появилась реальная потребность использовать Планер на нескольких устройствах (телефон + ноутбук и т.п.).
- **Предварительные мысли (на будущее)**:
  - Нужен бэкенд или облачное хранилище (Firebase/Supabase/свой API) + авторизация.
  - Необходимо решить вопросы конфликтов (одновременное изменение с разных устройств), версионирования и миграций.
  - PWA и текущая архитектура (SPA + `localStorage`) хорошо лягут на офлайн‑first синхронизацию, но это отдельный крупный этап.


